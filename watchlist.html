<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Favourites - Add Movies</title>
    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              light: "#F5FBEF",
              salmon: "#FD96A9",
              navy: "#444B6E",
              cerise: "#D0465F"
            },
          },
        },
      };
    </script>
    <script src="./js/scripts.js"></script>
  </head>

  <body class="bg-gray-50 min-h-screen">
   <header
      class="fixed top-0 left-0 right-0 z-50 bg-white flex items-center justify-between py-2 md:py-4 shadow-md px-2 md:px-4"
    >
      <div>
        <a
          href="index.html"
          class="text-xl md:text-4xl pl-2 md:pl-16 flex items-center gap-2"
        >
          <img
            src="./scene-it-high-resolution-logo-transparent.png"
            alt="SceneIt Logo"
            class="w-16 h-5 sm:w-24 sm:h-8 md:w-36 md:h-10"
          />
        </a>
      </div>

      <div class="flex items-center">
        <nav
          class="flex items-center space-x-2 sm:space-x-4 lg:space-x-6 text-gray-700 pr-2 md:pr-16"
        >
          <a
            class="hover:text-cerise text-xs sm:text-sm lg:text-base"
            href="index.html"
          >
            Home
          </a>
          <a
            class="hover:text-cerise text-xs sm:text-sm lg:text-base"
            href="watchlist.html"
          >
            My Watchlist
          </a>
        </nav>
      </div>
    </header>

    <main class="pt-24 pb-10 flex flex-col items-center" x-data="watchlistComponent" x-init="init()">
      <div class="flex items-center justify-between w-full max-w-6xl px-4 mb-8">
        <h1 class="text-3xl font-bold text-gray-800">My Watchlist</h1>
        <button 
          x-show="watchlist.length > 0"
          @click="clearWatchlist()"
          class="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-semibold transition-colors"
        >
          Clear All
        </button>
      </div>

      <div class="w-full max-w-6xl px-4">
        <!-- Empty watchlist logic -->
        <div x-show="watchlist.length === 0" class="text-center text-gray-500 py-12">
          <p class="text-lg">No favourite movies yet.</p>
          <p class="text-sm mt-2 mb-4">
            Add some movies to your favourites to see them here!
          </p>
          <a 
            href="index.html" 
            class="inline-block px-6 py-3 bg-salmon hover:bg-cerise text-white rounded-lg font-semibold transition-colors"
          >
            Click here to browse Movies
          </a>
        </div>

        <!-- Watchlist grid -->
        <div
          x-show="watchlist.length > 0"
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"
        >
          <template x-for="movie in watchlist" :key="movie.id">
            <div class="group border-4 border-salmon rounded-lg p-3 bg-white relative">
              <!-- Remove button -->
              <button
                @click="removeFromWatchlist(movie.id)"
                class="absolute top-2 right-2 p-2 z-10 w-10 h-10 bg-red-500 rounded-full hover:bg-salmon "
                title="Remove from watchlist"
              >
                <img 
                  src="./flat_cross_icon.svg.png" 
                  alt="Remove" 
                  class="w-full h-full"
                />
              </button>
              
              <!-- Movie poster -->
              <img
                @click="window.location.href = `movie.html?movie_id=${movie.id}`"
                class="w-full object-cover rounded-lg shadow-md group-hover:shadow-lg transition-shadow cursor-pointer"
                :src="`https://image.tmdb.org/t/p/w300${movie.poster_path}`"
                :alt="movie.title"
              />
              
              <!-- Movie title -->
              <a
                :href="`movie.html?movie_id=${movie.id}`"
                x-text="movie.title"
                class="block text-center text-sm font-medium text-gray-900 hover:text-blue-600 mt-2 leading-tight"
              ></a>
              
              <!-- Movie info -->
              <div class="mt-2 text-xs text-gray-600 text-center">
                <p x-show="movie.release_date" class="mb-1">
                  <span x-text="new Date(movie.release_date).getFullYear()"></span>
                </p>
                <p x-show="movie.vote_average" class="text-yellow-600">
                  ‚≠ê <span x-text="Math.round(movie.vote_average * 10) / 10"></span>/10
                </p>
              </div>
            </div>
          </template>
        </div>
      </div>
    </main>
  </body>
</html>
